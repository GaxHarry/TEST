{"ast":null,"code":"import Axios from \"axios\";\nimport { Message } from 'element-ui';\nconst request = Axios.create({\n  baseURL: \"/api\",\n  timeout: 30000,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\nlet placeholderLock = false;\nsetInterval(() => {\n  placeholderLock = false;\n}, 1000);\n\n// 接口响应拦截\nrequest.interceptors.response.use(config => {\n  // 如果用户未登录\n  if (config.data.code === 400 && config.data.msg === \"用户未登录\") {\n    if (!placeholderLock) {\n      Message.warning(\"权限失效， 请重新登录\");\n    }\n    placeholderLock = true;\n    // 跳转到登录页面\n    setTimeout(() => {\n      window.location.href = \"/#/unAuth\";\n    }, 1000);\n    return new Promise(() => {});\n  }\n\n  // 如果接口返回异常\n  if (config.data.code === 400) {\n    // 提示错误信息\n    Message.warning(config.data.msg);\n    return new Promise(() => {});\n  }\n  return config;\n}, error => {\n  console.log(error);\n  return Promise.reject(error);\n});\nexport default request;","map":{"version":3,"names":["Axios","Message","request","create","baseURL","timeout","headers","placeholderLock","setInterval","interceptors","response","use","config","data","code","msg","warning","setTimeout","window","location","href","Promise","error","console","log","reject"],"sources":["C:/Users/26275/Desktop/finalwork/前端源码/src/api/common/Request.js"],"sourcesContent":["import Axios from \"axios\";\r\nimport {Message} from 'element-ui'\r\n\r\nconst request = Axios.create({\r\n  baseURL: \"/api\",\r\n  timeout: 30000,\r\n  headers: {\"Content-Type\":\"application/json\"}\r\n});\r\n\r\nlet placeholderLock = false\r\nsetInterval(() => {\r\n  placeholderLock = false\r\n}, 1000);\r\n\r\n// 接口响应拦截\r\nrequest.interceptors.response.use((config)=>{\r\n  // 如果用户未登录\r\n  if (config.data.code === 400 && config.data.msg === \"用户未登录\") {\r\n    if (!placeholderLock) {\r\n      Message.warning(\"权限失效， 请重新登录\");\r\n    }\r\n    placeholderLock = true;\r\n    // 跳转到登录页面\r\n    setTimeout(() => {\r\n      window.location.href = \"/#/unAuth\"\r\n    }, 1000)\r\n    return new Promise(()=>{})\r\n  }\r\n\r\n  // 如果接口返回异常\r\n  if (config.data.code === 400) {\r\n\r\n    // 提示错误信息\r\n    Message.warning(config.data.msg);\r\n    return new Promise(()=>{})\r\n  }\r\n  return config\r\n},(error)=>{\r\n  console.log(error);\r\n  return Promise.reject(error)\r\n})\r\n\r\nexport default request;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,OAAO,QAAO,YAAY;AAElC,MAAMC,OAAO,GAAGF,KAAK,CAACG,MAAM,CAAC;EAC3BC,OAAO,EAAE,MAAM;EACfC,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE;IAAC,cAAc,EAAC;EAAkB;AAC7C,CAAC,CAAC;AAEF,IAAIC,eAAe,GAAG,KAAK;AAC3BC,WAAW,CAAC,MAAM;EAChBD,eAAe,GAAG,KAAK;AACzB,CAAC,EAAE,IAAI,CAAC;;AAER;AACAL,OAAO,CAACO,YAAY,CAACC,QAAQ,CAACC,GAAG,CAAEC,MAAM,IAAG;EAC1C;EACA,IAAIA,MAAM,CAACC,IAAI,CAACC,IAAI,KAAK,GAAG,IAAIF,MAAM,CAACC,IAAI,CAACE,GAAG,KAAK,OAAO,EAAE;IAC3D,IAAI,CAACR,eAAe,EAAE;MACpBN,OAAO,CAACe,OAAO,CAAC,aAAa,CAAC;IAChC;IACAT,eAAe,GAAG,IAAI;IACtB;IACAU,UAAU,CAAC,MAAM;MACfC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,WAAW;IACpC,CAAC,EAAE,IAAI,CAAC;IACR,OAAO,IAAIC,OAAO,CAAC,MAAI,CAAC,CAAC,CAAC;EAC5B;;EAEA;EACA,IAAIT,MAAM,CAACC,IAAI,CAACC,IAAI,KAAK,GAAG,EAAE;IAE5B;IACAb,OAAO,CAACe,OAAO,CAACJ,MAAM,CAACC,IAAI,CAACE,GAAG,CAAC;IAChC,OAAO,IAAIM,OAAO,CAAC,MAAI,CAAC,CAAC,CAAC;EAC5B;EACA,OAAOT,MAAM;AACf,CAAC,EAAEU,KAAK,IAAG;EACTC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EAClB,OAAOD,OAAO,CAACI,MAAM,CAACH,KAAK,CAAC;AAC9B,CAAC,CAAC;AAEF,eAAepB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}